<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="io.renren.modules.job.dao.UserDepartmentDao">
	<select id="queryAllUserDept" resultType="io.renren.modules.job.entity.UserDepartmentEntity" >
		select * from zq_user_department
	</select>
	<select id="queryByTime" parameterType="java.util.HashMap" resultType="java.util.HashMap">
     		select * from zq_user_department 
                <where>
                    <if test="dStart!=null">
                        <![CDATA[  and DATE_FORMAT(#{dEnd}, '%Y-%m-%d %H:%T:%s') >=  
                        DATE_FORMAT(#{dStart}, '%Y-%m-%d %H:%T:%s')   ]]>
                    </if>
                    <if test="dEnd!=null">
                        <![CDATA[  and DATE_FORMAT(created_timestamp, '%Y-%m-%d %H:%T:%s') <= 
                        DATE_FORMAT(#{dEnd} , '%Y-%m-%d %H:%T:%s')    ]]>
                    </if>
                </where>    
                order by created_timestamp desc
    </select>
    
    <delete id="deleteAll">
		delete from zq_user_department
	</delete>
	<insert id="save" parameterType="io.renren.modules.job.entity.UserDepartmentEntity" >
		insert into zq_user_department
			(
			object_id,
			dep_id,
			user_id,
			created_timestamp
			)
		values 
			(
			 #{objectId,jdbcType=NUMERIC},
			 #{depId,jdbcType=VARCHAR},
			 #{userId,jdbcType=VARCHAR},
			 #{createdTimestamp,jdbcType=TIMESTAMP}
			 )
	</insert>
	
		<insert id="saveBatch" parameterType="java.util.List" >
		insert into zq_user_department
			(
			object_id,
			dep_id,
			user_id,
			created_timestamp
			)
		values 
		 
		<foreach item="item" collection="list" index="index" separator="," >
			(
			#{item.objectId,jdbcType=NUMERIC},
			 #{item.depId,jdbcType=VARCHAR},
			 #{item.userId,jdbcType=VARCHAR},
			 #{item.createdTimestamp,jdbcType=TIMESTAMP}
			 )
		</foreach>
	</insert>
</mapper>